package main

// white = 1, black = 0
const (
	white = 1
	black = 0
)

// rook = 0, bishop = 1
const (
	rook   = 0
	bishop = 1
)

// enumerate board squares
const (
	a8 = uint64(iota)
	b8
	c8
	d8
	e8
	f8
	g8
	h8
	a7
	b7
	c7
	d7
	e7
	f7
	g7
	h7
	a6
	b6
	c6
	d6
	e6
	f6
	g6
	h6
	a5
	b5
	c5
	d5
	e5
	f5
	g5
	h5
	a4
	b4
	c4
	d4
	e4
	f4
	g4
	h4
	a3
	b3
	c3
	d3
	e3
	f3
	g3
	h3
	a2
	b2
	c2
	d2
	e2
	f2
	g2
	h2
	a1
	b1
	c1
	d1
	e1
	f1
	g1
	h1
)

// bitboard masks
const (
	//  e.g. all 0's in the "a" file, all 1's elsewhere
	//
	//  8    0  1  1  1  1  1  1  1
	//  7    0  1  1  1  1  1  1  1
	//  6    0  1  1  1  1  1  1  1
	//  5    0  1  1  1  1  1  1  1
	//  4    0  1  1  1  1  1  1  1
	//  3    0  1  1  1  1  1  1  1
	//  2    0  1  1  1  1  1  1  1
	//  1    0  1  1  1  1  1  1  1
	//
	//       a  b  c  d  e  f  g  h
	//       Bitboard: 18374403900871474942

	notAFile  = uint64(18374403900871474942)
	notHFile  = uint64(9187201950435737471)
	notABFile = uint64(18229723555195321596)
	notGHFile = uint64(4557430888798830399)
)

// easy way to lookup name of square from index in bitboard
var algebraic = [64]string{
	"a8", "b8", "c8", "d8", "e8", "f8", "g8", "h8",
	"a7", "b7", "c7", "d7", "e7", "f7", "g7", "h7",
	"a6", "b6", "c6", "d6", "e6", "f6", "g6", "h6",
	"a5", "b5", "c5", "d5", "e5", "f5", "g5", "h5",
	"a4", "b4", "c4", "d4", "e4", "f4", "g4", "h4",
	"a3", "b3", "c3", "d3", "e3", "f3", "g3", "h3",
	"a2", "b2", "c2", "d2", "e2", "f2", "g2", "h2",
	"a1", "b1", "c1", "d1", "e1", "f1", "g1", "h1",
}

// relevant occupancy bit counts for a rook at every square on board
var rookRelevantBits = [64]uint64{
	12, 11, 11, 11, 11, 11, 11, 12,
	11, 10, 10, 10, 10, 10, 10, 11,
	11, 10, 10, 10, 10, 10, 10, 11,
	11, 10, 10, 10, 10, 10, 10, 11,
	11, 10, 10, 10, 10, 10, 10, 11,
	11, 10, 10, 10, 10, 10, 10, 11,
	11, 10, 10, 10, 10, 10, 10, 11,
	12, 11, 11, 11, 11, 11, 11, 12,
}

// relevant occupancy bit counts for a bishop at every square on board
var bishopRelevantBits = [64]uint64{
	6, 5, 5, 5, 5, 5, 5, 6,
	5, 5, 5, 5, 5, 5, 5, 5,
	5, 5, 7, 7, 7, 7, 5, 5,
	5, 5, 7, 9, 9, 7, 5, 5,
	5, 5, 7, 9, 9, 7, 5, 5,
	5, 5, 7, 7, 7, 7, 5, 5,
	5, 5, 5, 5, 5, 5, 5, 5,
	6, 5, 5, 5, 5, 5, 5, 6,
}

// rook magic numbers from initMagicNumbers()
/*var rookMagicNumbers = [64]uint64{
	0x2000380201000008,
	0x9002041009000030,
	0x1000430100100082,
	0x808008040002020,
	0x801a0105000424,
	0x12000018200000a0,
	0x2000020800220040,
	0x40801910d4004,
	0x1020210000040180,
	0x1915500080810013,
	0x2800000882600,
	0x28140010110a,
	0xc0018c1000262001,
	0xa001000200060,
	0xc00000e00a000500,
	0x4050008210040800,
	0x25c080804200101,
	0x14a0000c00001004,
	0x202008011001182,
	0x88d288c004000,
	0xa520042000120000,
	0x80280304a109080,
	0x841801400120030,
	0x800080000100001,
	0x3200a40580200001,
	0x400020500c00200,
	0x2020020410000010,
	0x1000082400000400,
	0x800402808004000,
	0x40000300a102020,
	0x80042002904000,
	0x181080480000041,
	0x540004900470302,
	0x2019004000c382,
	0x1040010001880800,
	0x9000200289008000,
	0x131042080000150,
	0x220800040c04800,
	0x8c02100001200,
	0x2022188000040120,
	0x20020891201800,
	0x608022088440411,
	0x8061840001108005,
	0x870001a040,
	0x7000000009018,
	0x1001064a2250000,
	0x2000820300180020,
	0x2040c09000060020,
	0x2008000004069210,
	0x8b08001220009,
	0x400032040004,
	0x20006200040280c0,
	0x20004403000010,
	0x8000c001020c0001,
	0x12040810902240,
	0x400c802211420200,
	0x1a10004004004,
	0xa09540042500000,
	0x540008008069,
	0x1080c804200,
	0xa000081241180380,
	0x800880000402445,
	0x8040035200202040,
	0x400080002440020,
}

// bishop magic numbers from initMagicNumbers()
var bishopMagicNumbers = [64]uint64{
	0x8000900140840092,
	0x804840004c900,
	0x4018a4000100200,
	0x2008028800020000,
	0x4003108c18304c34,
	0x2c08401405280000,
	0x100780600010,
	0xc408004a001040,
	0x800420008018010,
	0x1800012898000018,
	0x62040981c0001032,
	0x102120030402100,
	0x10182840048180,
	0x50405800000840,
	0x4300085008,
	0x11008402150a0200,
	0x840011004044280,
	0x704840810202,
	0x8000020e080001,
	0x8808008200808401,
	0x44c20212800000,
	0x18000d090041800,
	0x10e020504211200,
	0x200021018440400,
	0xaa0001210064048,
	0x241102000008124,
	0x100002c12180204,
	0x880200102070,
	0x40200052008011,
	0x430000d0,
	0x8024c0005408060f,
	0x400002000c50060,
	0x422008180c1020,
	0x2308102a00414400,
	0x2000082020004206,
	0x8004000c2024090,
	0x6006501801,
	0x88880004685010,
	0x10000802040003c0,
	0x1010430800024000,
	0x410041240190800,
	0x1804000b00810100,
	0x800002808000284,
	0x648041000,
	0x80010802081044,
	0x8080024009001042,
	0x3000dc020500020,
	0x80042000e00004,
	0x220802468032200,
	0x10858020080a0,
	0x2080604201818000,
	0x8002100214000,
	0x8040000821802000,
	0xa0001200000c020,
	0x100090004e800,
	0x28890000282040,
	0x40502920100000,
	0x8020293001200840,
	0x2605400040003000,
	0x2200002002800446,
	0x200806200a008,
	0x801400600042100,
	0x2900290080208400,
	0x5000020058,
}*/

//debug
// rook magic numbers from initMagicNumbers()
var rookMagicNumbers = [64]uint64{
	0x8a80104000800020,
	0x140002000100040,
	0x2801880a0017001,
	0x100081001000420,
	0x200020010080420,
	0x3001c0002010008,
	0x8480008002000100,
	0x2080088004402900,
	0x800098204000,
	0x2024401000200040,
	0x100802000801000,
	0x120800800801000,
	0x208808088000400,
	0x2802200800400,
	0x2200800100020080,
	0x801000060821100,
	0x80044006422000,
	0x100808020004000,
	0x12108a0010204200,
	0x140848010000802,
	0x481828014002800,
	0x8094004002004100,
	0x4010040010010802,
	0x20008806104,
	0x100400080208000,
	0x2040002120081000,
	0x21200680100081,
	0x20100080080080,
	0x2000a00200410,
	0x20080800400,
	0x80088400100102,
	0x80004600042881,
	0x4040008040800020,
	0x440003000200801,
	0x4200011004500,
	0x188020010100100,
	0x14800401802800,
	0x2080040080800200,
	0x124080204001001,
	0x200046502000484,
	0x480400080088020,
	0x1000422010034000,
	0x30200100110040,
	0x100021010009,
	0x2002080100110004,
	0x202008004008002,
	0x20020004010100,
	0x2048440040820001,
	0x101002200408200,
	0x40802000401080,
	0x4008142004410100,
	0x2060820c0120200,
	0x1001004080100,
	0x20c020080040080,
	0x2935610830022400,
	0x44440041009200,
	0x280001040802101,
	0x2100190040002085,
	0x80c0084100102001,
	0x4024081001000421,
	0x20030a0244872,
	0x12001008414402,
	0x2006104900a0804,
	0x1004081002402,
}

// bishop magic numbers from initMagicNumbers()
var bishopMagicNumbers = [64]uint64{
	0x40040844404084,
	0x2004208a004208,
	0x10190041080202,
	0x108060845042010,
	0x581104180800210,
	0x2112080446200010,
	0x1080820820060210,
	0x3c0808410220200,
	0x4050404440404,
	0x21001420088,
	0x24d0080801082102,
	0x1020a0a020400,
	0x40308200402,
	0x4011002100800,
	0x401484104104005,
	0x801010402020200,
	0x400210c3880100,
	0x404022024108200,
	0x810018200204102,
	0x4002801a02003,
	0x85040820080400,
	0x810102c808880400,
	0xe900410884800,
	0x8002020480840102,
	0x220200865090201,
	0x2010100a02021202,
	0x152048408022401,
	0x20080002081110,
	0x4001001021004000,
	0x800040400a011002,
	0xe4004081011002,
	0x1c004001012080,
	0x8004200962a00220,
	0x8422100208500202,
	0x2000402200300c08,
	0x8646020080080080,
	0x80020a0200100808,
	0x2010004880111000,
	0x623000a080011400,
	0x42008c0340209202,
	0x209188240001000,
	0x400408a884001800,
	0x110400a6080400,
	0x1840060a44020800,
	0x90080104000041,
	0x201011000808101,
	0x1a2208080504f080,
	0x8012020600211212,
	0x500861011240000,
	0x180806108200800,
	0x4000020e01040044,
	0x300000261044000a,
	0x802241102020002,
	0x20906061210001,
	0x5a84841004010310,
	0x4010801011c04,
	0xa010109502200,
	0x4a02012000,
	0x500201010098b028,
	0x8040002811040900,
	0x28000010020204,
	0x6000020202d0240,
	0x8918844842082200,
	0x4010011029020020,
}
